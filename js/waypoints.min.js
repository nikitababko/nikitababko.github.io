(function(){var t,n,e,i,o,r,l,s,c,a,u,f,h,d,p,w,v=[].indexOf||function(t){for(var n=0,e=this.length;n<e;n++)if(n in this&&this[n]===t)return n;return-1},y=[].slice;t=window.jQuery,n=t(window),o={horizontal:{},vertical:{}},r=1,s={},l="waypoints-context-id",u="resize.waypoints",f="scroll.waypoints",h=1,d="waypoints-waypoint-ids",p="waypoint",w="waypoints",e=function(){function n(n){var e=this;this.$element=n,this.element=n[0],this.didResize=!1,this.didScroll=!1,this.id="context"+r++,this.oldScroll={x:n.scrollLeft(),y:n.scrollTop()},this.waypoints={horizontal:{},vertical:{}},n.data(l,this.id),s[this.id]=this,n.bind(f,(function(){var n;if(!e.didScroll)return e.didScroll=!0,n=function(){return e.doScroll(),e.didScroll=!1},window.setTimeout(n,t[w].settings.scrollThrottle)})),n.bind(u,(function(){var n;if(!e.didResize)return e.didResize=!0,n=function(){return t[w]("refresh"),e.didResize=!1},window.setTimeout(n,t[w].settings.resizeThrottle)}))}return n.prototype.doScroll=function(){var n,e=this;return n={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!(v.call(window,"ontouchstart")>=0)||n.vertical.oldScroll&&n.vertical.newScroll||t[w]("refresh"),t.each(n,(function(n,i){var o,r,l;return l=[],r=i.newScroll>i.oldScroll,o=r?i.forward:i.backward,t.each(e.waypoints[n],(function(t,n){var e,o;return i.oldScroll<(e=n.offset)&&e<=i.newScroll||i.newScroll<(o=n.offset)&&o<=i.oldScroll?l.push(n):void 0})),l.sort((function(t,n){return t.offset-n.offset})),r||l.reverse(),t.each(l,(function(t,n){if(n.options.continuous||t===l.length-1)return n.trigger([o])}))})),this.oldScroll={x:n.horizontal.newScroll,y:n.vertical.newScroll}},n.prototype.refresh=function(){var n,e,i,o=this;return i=t.isWindow(this.element),e=this.$element.offset(),this.doScroll(),n={horizontal:{contextOffset:i?0:e.left,contextScroll:i?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:i?0:e.top,contextScroll:i?0:this.oldScroll.y,contextDimension:i?t[w]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},t.each(n,(function(n,e){return t.each(o.waypoints[n],(function(n,i){var o,r,l,s,c;if(o=i.options.offset,l=i.offset,r=t.isWindow(i.element)?0:i.$element.offset()[e.offsetProp],t.isFunction(o)?o=o.apply(i.element):"string"==typeof o&&(o=parseFloat(o),i.options.offset.indexOf("%")>-1&&(o=Math.ceil(e.contextDimension*o/100))),i.offset=r-e.contextOffset+e.contextScroll-o,(!i.options.onlyOnScroll||null==l)&&i.enabled)return null!==l&&l<(s=e.oldScroll)&&s<=i.offset?i.trigger([e.backward]):null!==l&&l>(c=e.oldScroll)&&c>=i.offset||null===l&&e.oldScroll>=i.offset?i.trigger([e.forward]):void 0}))}))},n.prototype.checkEmpty=function(){if(t.isEmptyObject(this.waypoints.horizontal)&&t.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([u,f].join(" ")),delete s[this.id]},n}(),i=function(){function n(n,e,i){var r,l;"bottom-in-view"===(i=t.extend({},t.fn[p].defaults,i)).offset&&(i.offset=function(){var n;return n=t[w]("viewportHeight"),t.isWindow(e.element)||(n=e.$element.height()),n-t(this).outerHeight()}),this.$element=n,this.element=n[0],this.axis=i.horizontal?"horizontal":"vertical",this.callback=i.handler,this.context=e,this.enabled=i.enabled,this.id="waypoints"+h++,this.offset=null,this.options=i,e.waypoints[this.axis][this.id]=this,o[this.axis][this.id]=this,(r=null!=(l=n.data(d))?l:[]).push(this.id),n.data(d,r)}return n.prototype.trigger=function(t){if(this.enabled)return null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0},n.prototype.disable=function(){return this.enabled=!1},n.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},n.prototype.destroy=function(){return delete o[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},n.getWaypointsByElement=function(n){var e,i;return(i=t(n).data(d))?(e=t.extend({},o.horizontal,o.vertical),t.map(i,(function(t){return e[t]}))):[]},n}(),a={init:function(n,o){return null==o&&(o={}),null==o.handler&&(o.handler=n),this.each((function(){var n,r,c,a;return n=t(this),c=null!=(a=o.context)?a:t.fn[p].defaults.context,t.isWindow(c)||(c=n.closest(c)),c=t(c),(r=s[c.data(l)])||(r=new e(c)),new i(n,r,o)})),t[w]("refresh"),this},disable:function(){return a._invoke(this,"disable")},enable:function(){return a._invoke(this,"enable")},destroy:function(){return a._invoke(this,"destroy")},prev:function(t,n){return a._traverse.call(this,t,n,(function(t,n,e){if(n>0)return t.push(e[n-1])}))},next:function(t,n){return a._traverse.call(this,t,n,(function(t,n,e){if(n<e.length-1)return t.push(e[n+1])}))},_traverse:function(n,e,i){var o,r;return null==n&&(n="vertical"),null==e&&(e=window),r=c.aggregate(e),o=[],this.each((function(){var e;return e=t.inArray(this,r[n]),i(o,e,r[n])})),this.pushStack(o)},_invoke:function(n,e){return n.each((function(){var n;return n=i.getWaypointsByElement(this),t.each(n,(function(t,n){return n[e](),!0}))})),this}},t.fn[p]=function(){var n,e;return e=arguments[0],n=2<=arguments.length?y.call(arguments,1):[],a[e]?a[e].apply(this,n):t.isFunction(e)?a.init.apply(this,arguments):t.isPlainObject(e)?a.init.apply(this,[null,e]):e?t.error("The "+e+" method does not exist in jQuery Waypoints."):t.error("jQuery Waypoints needs a callback function or handler option.")},t.fn[p].defaults={context:window,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},c={refresh:function(){return t.each(s,(function(t,n){return n.refresh()}))},viewportHeight:function(){var t;return null!=(t=window.innerHeight)?t:n.height()},aggregate:function(n){var e,i,r;return e=o,n&&(e=null!=(r=s[t(n).data(l)])?r.waypoints:void 0),e?(i={horizontal:[],vertical:[]},t.each(i,(function(n,o){return t.each(e[n],(function(t,n){return o.push(n)})),o.sort((function(t,n){return t.offset-n.offset})),i[n]=t.map(o,(function(t){return t.element})),i[n]=t.unique(i[n])})),i):[]},above:function(t){return null==t&&(t=window),c._filter(t,"vertical",(function(t,n){return n.offset<=t.oldScroll.y}))},below:function(t){return null==t&&(t=window),c._filter(t,"vertical",(function(t,n){return n.offset>t.oldScroll.y}))},left:function(t){return null==t&&(t=window),c._filter(t,"horizontal",(function(t,n){return n.offset<=t.oldScroll.x}))},right:function(t){return null==t&&(t=window),c._filter(t,"horizontal",(function(t,n){return n.offset>t.oldScroll.x}))},enable:function(){return c._invoke("enable")},disable:function(){return c._invoke("disable")},destroy:function(){return c._invoke("destroy")},extendFn:function(t,n){return a[t]=n},_invoke:function(n){var e;return e=t.extend({},o.vertical,o.horizontal),t.each(e,(function(t,e){return e[n](),!0}))},_filter:function(n,e,i){var o,r;return(o=s[t(n).data(l)])?(r=[],t.each(o.waypoints[e],(function(t,n){if(i(o,n))return r.push(n)})),r.sort((function(t,n){return t.offset-n.offset})),t.map(r,(function(t){return t.element}))):[]}},t[w]=function(){var t,n;return n=arguments[0],t=2<=arguments.length?y.call(arguments,1):[],c[n]?c[n].apply(null,t):c.aggregate.call(null,n)},t[w].settings={resizeThrottle:100,scrollThrottle:30},n.load((function(){return t[w]("refresh")}))}).call(this);
//# sourceMappingURL=waypoints.min.js.map
